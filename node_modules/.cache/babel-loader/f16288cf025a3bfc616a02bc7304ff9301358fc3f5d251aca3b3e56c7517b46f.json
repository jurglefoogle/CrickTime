{"ast":null,"code":"import React from'react';import ReactDOM from'react-dom/client';import'./index.css';import App from'./App';// Register service worker for PWA functionality\n// Reference: www.context7.com for PWA best practices\nimport{jsx as _jsx}from\"react/jsx-runtime\";if('serviceWorker'in navigator){// Capture deferred install prompt\nlet deferredPrompt=null;window.addEventListener('beforeinstallprompt',e=>{e.preventDefault();deferredPrompt=e;window._showInstallPrompt=async()=>{if(!deferredPrompt)return false;deferredPrompt.prompt();const choice=await deferredPrompt.userChoice;deferredPrompt=null;return choice.outcome==='accepted';};console.log('PWA: beforeinstallprompt captured');});window.addEventListener('load',()=>{navigator.serviceWorker.register('/sw.js').then(registration=>{console.log('SW registered: ',registration);// Check for updates every time the app loads\nregistration.addEventListener('updatefound',()=>{const newWorker=registration.installing;if(newWorker){newWorker.addEventListener('statechange',()=>{if(newWorker.state==='installed'&&navigator.serviceWorker.controller){// New content is available, refresh the page\nconsole.log('SW: New content available, refreshing...');window.location.reload();}});}});// Check for updates immediately\nregistration.update();}).catch(registrationError=>{console.log('SW registration failed: ',registrationError);});});// Listen for messages from service worker\nnavigator.serviceWorker.addEventListener('message',event=>{if(event.data&&event.data.type==='SW_UPDATED'){console.log('SW: Service worker updated, refreshing...');window.location.reload();}else if(event.data&&event.data.type==='CACHE_CLEARED'){console.log('SW: Cache cleared successfully');}});// Add global function for clearing cache (useful for debugging)\nwindow.clearAppCache=()=>{if(navigator.serviceWorker.controller){navigator.serviceWorker.controller.postMessage({type:'CLEAR_CACHE'});console.log('SW: Cache clear requested');}else{console.log('SW: No service worker controller available');}};// Local backup/export utilities\nwindow.exportLocalData=()=>{try{const raw=localStorage.getItem('appData');if(!raw){alert('No data to export');return;}const blob=new Blob([raw],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;const ts=new Date().toISOString().slice(0,10);a.download=\"cricktime-backup-\".concat(ts,\".json\");a.click();URL.revokeObjectURL(url);}catch(e){console.error('Export failed',e);alert('Export failed');}};window.importLocalData=file=>{if(!file)return;const reader=new FileReader();reader.onload=e=>{try{const parsed=JSON.parse(e.target.result);if(!parsed||typeof parsed!=='object')throw new Error('Invalid');localStorage.setItem('appData',JSON.stringify(parsed));alert('Data imported. Reloading...');window.location.reload();}catch(err){console.error('Import failed',err);alert('Invalid backup file');}};reader.readAsText(file);};}const root=ReactDOM.createRoot(document.getElementById('root'));root.render(/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsx(App,{})}));","map":{"version":3,"names":["React","ReactDOM","App","jsx","_jsx","navigator","deferredPrompt","window","addEventListener","e","preventDefault","_showInstallPrompt","prompt","choice","userChoice","outcome","console","log","serviceWorker","register","then","registration","newWorker","installing","state","controller","location","reload","update","catch","registrationError","event","data","type","clearAppCache","postMessage","exportLocalData","raw","localStorage","getItem","alert","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","ts","Date","toISOString","slice","download","concat","click","revokeObjectURL","error","importLocalData","file","reader","FileReader","onload","parsed","JSON","parse","target","result","Error","setItem","stringify","err","readAsText","root","createRoot","getElementById","render","StrictMode","children"],"sources":["C:/Users/jurgl/HTMLProjects/CrickTime/src/index.js"],"sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n// Register service worker for PWA functionality\r\n// Reference: www.context7.com for PWA best practices\r\nif ('serviceWorker' in navigator) {\r\n  // Capture deferred install prompt\r\n  let deferredPrompt = null;\r\n  window.addEventListener('beforeinstallprompt', (e) => {\r\n    e.preventDefault();\r\n    deferredPrompt = e;\r\n    window._showInstallPrompt = async () => {\r\n      if (!deferredPrompt) return false;\r\n      deferredPrompt.prompt();\r\n      const choice = await deferredPrompt.userChoice;\r\n      deferredPrompt = null;\r\n      return choice.outcome === 'accepted';\r\n    };\r\n    console.log('PWA: beforeinstallprompt captured');\r\n  });\r\n\r\n  window.addEventListener('load', () => {\r\n    navigator.serviceWorker.register('/sw.js')\r\n      .then((registration) => {\r\n        console.log('SW registered: ', registration);\r\n        \r\n        // Check for updates every time the app loads\r\n        registration.addEventListener('updatefound', () => {\r\n          const newWorker = registration.installing;\r\n          if (newWorker) {\r\n            newWorker.addEventListener('statechange', () => {\r\n              if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n                // New content is available, refresh the page\r\n                console.log('SW: New content available, refreshing...');\r\n                window.location.reload();\r\n              }\r\n            });\r\n          }\r\n        });\r\n        \r\n        // Check for updates immediately\r\n        registration.update();\r\n      })\r\n      .catch((registrationError) => {\r\n        console.log('SW registration failed: ', registrationError);\r\n      });\r\n  });\r\n  \r\n  // Listen for messages from service worker\r\n  navigator.serviceWorker.addEventListener('message', (event) => {\r\n    if (event.data && event.data.type === 'SW_UPDATED') {\r\n      console.log('SW: Service worker updated, refreshing...');\r\n      window.location.reload();\r\n    } else if (event.data && event.data.type === 'CACHE_CLEARED') {\r\n      console.log('SW: Cache cleared successfully');\r\n    }\r\n  });\r\n  \r\n  // Add global function for clearing cache (useful for debugging)\r\n  window.clearAppCache = () => {\r\n    if (navigator.serviceWorker.controller) {\r\n      navigator.serviceWorker.controller.postMessage({ type: 'CLEAR_CACHE' });\r\n      console.log('SW: Cache clear requested');\r\n    } else {\r\n      console.log('SW: No service worker controller available');\r\n    }\r\n  };\r\n\r\n  // Local backup/export utilities\r\n  window.exportLocalData = () => {\r\n    try {\r\n      const raw = localStorage.getItem('appData');\r\n      if (!raw) {\r\n        alert('No data to export');\r\n        return;\r\n      }\r\n      const blob = new Blob([raw], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      const ts = new Date().toISOString().slice(0,10);\r\n      a.download = `cricktime-backup-${ts}.json`;\r\n      a.click();\r\n      URL.revokeObjectURL(url);\r\n    } catch (e) {\r\n      console.error('Export failed', e);\r\n      alert('Export failed');\r\n    }\r\n  };\r\n\r\n  window.importLocalData = (file) => {\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      try {\r\n        const parsed = JSON.parse(e.target.result);\r\n        if (!parsed || typeof parsed !== 'object') throw new Error('Invalid');\r\n        localStorage.setItem('appData', JSON.stringify(parsed));\r\n        alert('Data imported. Reloading...');\r\n        window.location.reload();\r\n      } catch (err) {\r\n        console.error('Import failed', err);\r\n        alert('Invalid backup file');\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n  };\r\n}\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n);\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,aAAa,CACpB,MAAO,CAAAC,GAAG,KAAM,OAAO,CAEvB;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,GAAI,eAAe,EAAI,CAAAC,SAAS,CAAE,CAChC;AACA,GAAI,CAAAC,cAAc,CAAG,IAAI,CACzBC,MAAM,CAACC,gBAAgB,CAAC,qBAAqB,CAAGC,CAAC,EAAK,CACpDA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBJ,cAAc,CAAGG,CAAC,CAClBF,MAAM,CAACI,kBAAkB,CAAG,SAAY,CACtC,GAAI,CAACL,cAAc,CAAE,MAAO,MAAK,CACjCA,cAAc,CAACM,MAAM,CAAC,CAAC,CACvB,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAP,cAAc,CAACQ,UAAU,CAC9CR,cAAc,CAAG,IAAI,CACrB,MAAO,CAAAO,MAAM,CAACE,OAAO,GAAK,UAAU,CACtC,CAAC,CACDC,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC,CAClD,CAAC,CAAC,CAEFV,MAAM,CAACC,gBAAgB,CAAC,MAAM,CAAE,IAAM,CACpCH,SAAS,CAACa,aAAa,CAACC,QAAQ,CAAC,QAAQ,CAAC,CACvCC,IAAI,CAAEC,YAAY,EAAK,CACtBL,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEI,YAAY,CAAC,CAE5C;AACAA,YAAY,CAACb,gBAAgB,CAAC,aAAa,CAAE,IAAM,CACjD,KAAM,CAAAc,SAAS,CAAGD,YAAY,CAACE,UAAU,CACzC,GAAID,SAAS,CAAE,CACbA,SAAS,CAACd,gBAAgB,CAAC,aAAa,CAAE,IAAM,CAC9C,GAAIc,SAAS,CAACE,KAAK,GAAK,WAAW,EAAInB,SAAS,CAACa,aAAa,CAACO,UAAU,CAAE,CACzE;AACAT,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC,CACvDV,MAAM,CAACmB,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC1B,CACF,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CAEF;AACAN,YAAY,CAACO,MAAM,CAAC,CAAC,CACvB,CAAC,CAAC,CACDC,KAAK,CAAEC,iBAAiB,EAAK,CAC5Bd,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEa,iBAAiB,CAAC,CAC5D,CAAC,CAAC,CACN,CAAC,CAAC,CAEF;AACAzB,SAAS,CAACa,aAAa,CAACV,gBAAgB,CAAC,SAAS,CAAGuB,KAAK,EAAK,CAC7D,GAAIA,KAAK,CAACC,IAAI,EAAID,KAAK,CAACC,IAAI,CAACC,IAAI,GAAK,YAAY,CAAE,CAClDjB,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC,CACxDV,MAAM,CAACmB,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC1B,CAAC,IAAM,IAAII,KAAK,CAACC,IAAI,EAAID,KAAK,CAACC,IAAI,CAACC,IAAI,GAAK,eAAe,CAAE,CAC5DjB,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CAC/C,CACF,CAAC,CAAC,CAEF;AACAV,MAAM,CAAC2B,aAAa,CAAG,IAAM,CAC3B,GAAI7B,SAAS,CAACa,aAAa,CAACO,UAAU,CAAE,CACtCpB,SAAS,CAACa,aAAa,CAACO,UAAU,CAACU,WAAW,CAAC,CAAEF,IAAI,CAAE,aAAc,CAAC,CAAC,CACvEjB,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CAC1C,CAAC,IAAM,CACLD,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAC,CAC3D,CACF,CAAC,CAED;AACAV,MAAM,CAAC6B,eAAe,CAAG,IAAM,CAC7B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAC3C,GAAI,CAACF,GAAG,CAAE,CACRG,KAAK,CAAC,mBAAmB,CAAC,CAC1B,OACF,CACA,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAAC,CAACL,GAAG,CAAC,CAAE,CAAEJ,IAAI,CAAE,kBAAmB,CAAC,CAAC,CAC1D,KAAM,CAAAU,GAAG,CAAGC,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC,CACrC,KAAM,CAAAK,CAAC,CAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CACrCF,CAAC,CAACG,IAAI,CAAGN,GAAG,CACZ,KAAM,CAAAO,EAAE,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAC/CP,CAAC,CAACQ,QAAQ,qBAAAC,MAAA,CAAuBL,EAAE,SAAO,CAC1CJ,CAAC,CAACU,KAAK,CAAC,CAAC,CACTZ,GAAG,CAACa,eAAe,CAACd,GAAG,CAAC,CAC1B,CAAE,MAAOlC,CAAC,CAAE,CACVO,OAAO,CAAC0C,KAAK,CAAC,eAAe,CAAEjD,CAAC,CAAC,CACjC+B,KAAK,CAAC,eAAe,CAAC,CACxB,CACF,CAAC,CAEDjC,MAAM,CAACoD,eAAe,CAAIC,IAAI,EAAK,CACjC,GAAI,CAACA,IAAI,CAAE,OACX,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAC,UAAU,CAAC,CAAC,CAC/BD,MAAM,CAACE,MAAM,CAAItD,CAAC,EAAK,CACrB,GAAI,CACF,KAAM,CAAAuD,MAAM,CAAGC,IAAI,CAACC,KAAK,CAACzD,CAAC,CAAC0D,MAAM,CAACC,MAAM,CAAC,CAC1C,GAAI,CAACJ,MAAM,EAAI,MAAO,CAAAA,MAAM,GAAK,QAAQ,CAAE,KAAM,IAAI,CAAAK,KAAK,CAAC,SAAS,CAAC,CACrE/B,YAAY,CAACgC,OAAO,CAAC,SAAS,CAAEL,IAAI,CAACM,SAAS,CAACP,MAAM,CAAC,CAAC,CACvDxB,KAAK,CAAC,6BAA6B,CAAC,CACpCjC,MAAM,CAACmB,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC1B,CAAE,MAAO6C,GAAG,CAAE,CACZxD,OAAO,CAAC0C,KAAK,CAAC,eAAe,CAAEc,GAAG,CAAC,CACnChC,KAAK,CAAC,qBAAqB,CAAC,CAC9B,CACF,CAAC,CACDqB,MAAM,CAACY,UAAU,CAACb,IAAI,CAAC,CACzB,CAAC,CACH,CAEA,KAAM,CAAAc,IAAI,CAAGzE,QAAQ,CAAC0E,UAAU,CAAC5B,QAAQ,CAAC6B,cAAc,CAAC,MAAM,CAAC,CAAC,CACjEF,IAAI,CAACG,MAAM,cACTzE,IAAA,CAACJ,KAAK,CAAC8E,UAAU,EAAAC,QAAA,cACf3E,IAAA,CAACF,GAAG,GAAE,CAAC,CACS,CACpB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}