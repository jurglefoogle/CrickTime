{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jurgl\\\\HTMLProjects\\\\CrickTime\\\\src\\\\components\\\\tabs\\\\JobsTab.js\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useEffect, useState } from 'react';\nimport Card from '../ui/Card';\nimport Button from '../ui/Button';\nimport { dataService } from '../../utils/dataService';\n\n/**\r\n * Jobs Tab\r\n * Shows open & closed jobs with ability to close and invoice.\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst JobsTab = ({\n  appData,\n  updateAppData,\n  onNavigate,\n  onInvoiceJob\n}) => {\n  _s();\n  const jobs = appData.jobs || [];\n  const charges = appData.charges || [];\n  const [expandedChargesJobId, setExpandedChargesJobId] = useState(null);\n  const [chargeForm, setChargeForm] = useState({\n    kind: 'part',\n    description: '',\n    quantity: '1',\n    unitCost: '',\n    unitPrice: '',\n    clientId: '',\n    category: ''\n  });\n  const [editingChargeId, setEditingChargeId] = useState(null);\n  const [editDraft, setEditDraft] = useState(null); // { id, description, quantity, unitCost, unitPrice, category }\n  const [showBulkAdd, setShowBulkAdd] = useState(false);\n  const [bulkText, setBulkText] = useState('');\n  useEffect(() => {\n    const entries = appData.entries || [];\n    const currentJobs = appData.jobs || [];\n    const missingJobEntries = entries.filter(e => e.taskName && (!e.jobId || !currentJobs.find(j => j.id === e.jobId)));\n    if (!missingJobEntries.length) return;\n    const additions = [];\n    const updates = [];\n    missingJobEntries.forEach(e => {\n      const name = e.taskName.trim();\n      let job = currentJobs.find(j => j.name.toLowerCase() === name.toLowerCase());\n      if (!job) {\n        job = {\n          id: dataService.generateId(),\n          name,\n          closed: false,\n          createdAt: Date.now()\n        };\n        additions.push(job);\n      }\n      if (!e.jobId) updates.push({\n        entryId: e.id,\n        jobId: job.id\n      });\n    });\n    if (additions.length || updates.length) {\n      const updatedJobs = [...currentJobs, ...additions];\n      const updatedEntries = entries.map(e => {\n        const upd = updates.find(u => u.entryId === e.id);\n        return upd ? {\n          ...e,\n          jobId: upd.jobId\n        } : e;\n      });\n      updateAppData({\n        jobs: updatedJobs,\n        entries: updatedEntries\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Legacy auto-derivation removed.\n\n  const openJobs = jobs.filter(j => !j.closed);\n  const closedJobs = jobs.filter(j => j.closed);\n\n  // Aggregate metrics for jobs\n  const jobStats = useMemo(() => {\n    const map = {};\n    (appData.entries || []).forEach(e => {\n      const jobId = e.jobId;\n      if (!jobId) return;\n      if (!map[jobId]) map[jobId] = {\n        hours: 0,\n        amount: 0\n      };\n      if (e.end) {\n        const client = appData.clients.find(c => c.id === e.clientId);\n        const hours = dataService.durationToHours(e.end - e.start);\n        map[jobId].hours += hours;\n        map[jobId].amount += client ? hours * client.rate : 0;\n      }\n    });\n    return map;\n  }, [appData.entries, appData.clients]);\n  const closeJob = job => {\n    if (!window.confirm(`Close job \"${job.name}\"? It will be hidden from selection.`)) return;\n    updateAppData({\n      jobs: jobs.map(j => j.id === job.id ? {\n        ...j,\n        closed: true,\n        closedAt: Date.now()\n      } : j)\n    });\n  };\n  const reopenJob = job => {\n    updateAppData({\n      jobs: jobs.map(j => j.id === job.id ? {\n        ...j,\n        closed: false,\n        closedAt: null\n      } : j)\n    });\n  };\n\n  // ---- Charges Helpers (Phase 1 Parts & Expenses) ----\n  const chargesForJob = jobId => charges.filter(c => c.jobId === jobId);\n  const addCharge = job => {\n    var _appData$entries$find, _appData$clients$;\n    const desc = chargeForm.description.trim();\n    if (!desc) {\n      alert('Description required');\n      return;\n    }\n    const qty = parseFloat(chargeForm.quantity) || 0;\n    if (qty <= 0) {\n      alert('Quantity must be > 0');\n      return;\n    }\n    const unitCost = parseFloat(chargeForm.unitCost) || 0;\n    if (unitCost < 0) {\n      alert('Unit cost >= 0');\n      return;\n    }\n    const unitPrice = chargeForm.unitPrice ? parseFloat(chargeForm.unitPrice) : unitCost;\n    if (unitPrice < 0) {\n      alert('Unit price >= 0');\n      return;\n    }\n    const amountCached = qty * unitPrice;\n    // Determine client: prefer explicit selection on form if present\n    const inferredClientId = ((_appData$entries$find = appData.entries.find(e => e.jobId === job.id)) === null || _appData$entries$find === void 0 ? void 0 : _appData$entries$find.clientId) || chargeForm.clientId || ((_appData$clients$ = appData.clients[0]) === null || _appData$clients$ === void 0 ? void 0 : _appData$clients$.id) || '';\n    if (!inferredClientId) {\n      alert('Select a client for this charge.');\n      return;\n    }\n    category: chargeForm.kind === 'expense' ? chargeForm.category || 'other' : undefined;\n    const newCharge = {\n      id: dataService.generateId(),\n      jobId: job.id,\n      clientId: inferredClientId,\n      kind: chargeForm.kind,\n      description: desc,\n      quantity: qty,\n      unitCost,\n      unitPrice,\n      amountCached,\n      createdAt: Date.now(),\n      invoiced: false\n    };\n    updateAppData({\n      charges: [...charges, newCharge]\n    });\n    setChargeForm({\n      kind: 'part',\n      description: '',\n      quantity: '1',\n      unitCost: '',\n      unitPrice: '',\n      clientId: chargeForm.clientId || ''\n    });\n  };\n  const deleteCharge = chargeId => {\n    if (!window.confirm('Delete this charge?')) return;\n    updateAppData({\n      charges: charges.filter(c => c.id !== chargeId)\n    });\n  };\n  const beginEdit = charge => {\n    if (charge.invoiced) return;\n    setEditingChargeId(charge.id);\n    setEditDraft({\n      ...charge,\n      quantity: String(charge.quantity),\n      unitCost: String(charge.unitCost),\n      unitPrice: String(charge.unitPrice),\n      description: charge.description,\n      category: charge.category || ''\n    });\n  };\n  const cancelEdit = () => {\n    setEditingChargeId(null);\n    setEditDraft(null);\n  };\n  const saveEdit = () => {\n    if (!editDraft) return;\n    const desc = editDraft.description.trim();\n    if (!desc) {\n      alert('Description required');\n      return;\n    }\n    const qty = parseFloat(editDraft.quantity) || 0;\n    if (qty <= 0) {\n      alert('Qty > 0');\n      return;\n    }\n    const unitCost = parseFloat(editDraft.unitCost) || 0;\n    if (unitCost < 0) {\n      alert('Cost >=0');\n      return;\n    }\n    const unitPrice = parseFloat(editDraft.unitPrice) || 0;\n    if (unitPrice < 0) {\n      alert('Price >=0');\n      return;\n    }\n    const amountCached = qty * unitPrice;\n    const updated = charges.map(c => c.id === editDraft.id ? {\n      ...c,\n      description: desc,\n      quantity: qty,\n      unitCost,\n      unitPrice,\n      amountCached,\n      category: c.kind === 'expense' ? editDraft.category || 'other' : undefined\n    } : c);\n    updateAppData({\n      charges: updated\n    });\n    cancelEdit();\n  };\n  const parseBulk = job => {\n    const lines = bulkText.split(/\\r?\\n/).map(l => l.trim()).filter(l => l);\n    if (!lines.length) {\n      alert('No lines to import');\n      return;\n    }\n    const newOnes = [];\n    for (const line of lines) {\n      var _appData$entries$find2, _appData$clients$2;\n      // description,qty,cost,price,kind(optional),category(optional)\n      const parts = line.split(',').map(p => p.trim());\n      if (parts.length < 4) {\n        continue;\n      }\n      let [description, qtyStr, costStr, priceStr, kindStr, catStr] = parts;\n      const qty = parseFloat(qtyStr) || 0;\n      if (qty <= 0) continue;\n      const unitCost = parseFloat(costStr) || 0;\n      if (unitCost < 0) continue;\n      const unitPrice = parseFloat(priceStr);\n      const finalPrice = isNaN(unitPrice) ? unitCost : unitPrice;\n      const kind = kindStr === 'expense' || kindStr === 'part' ? kindStr : 'part';\n      const category = kind === 'expense' ? catStr || 'other' : undefined;\n      const amountCached = qty * finalPrice;\n      const inferredClientId = ((_appData$entries$find2 = appData.entries.find(e => e.jobId === job.id)) === null || _appData$entries$find2 === void 0 ? void 0 : _appData$entries$find2.clientId) || chargeForm.clientId || ((_appData$clients$2 = appData.clients[0]) === null || _appData$clients$2 === void 0 ? void 0 : _appData$clients$2.id) || '';\n      newOnes.push({\n        id: dataService.generateId(),\n        jobId: job.id,\n        clientId: inferredClientId,\n        kind,\n        description,\n        quantity: qty,\n        unitCost,\n        unitPrice: finalPrice,\n        amountCached,\n        createdAt: Date.now(),\n        invoiced: false,\n        category\n      });\n    }\n    if (!newOnes.length) {\n      alert('No valid lines parsed');\n      return;\n    }\n    updateAppData({\n      charges: [...charges, ...newOnes]\n    });\n    setBulkText('');\n    setShowBulkAdd(false);\n  };\n  const formatCurrency = v => dataService.formatCurrency(v);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tab-content\",\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"page-title\",\n        children: \"Jobs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-400\",\n        children: \"Manage open jobs and invoice work per job.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"card-title\",\n          children: [\"Open Jobs (\", openJobs.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), openJobs.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-state\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"empty-state-text\",\n          children: \"No open jobs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"activity-list\",\n        children: openJobs.sort((a, b) => a.name.localeCompare(b.name)).map(job => {\n          const stats = jobStats[job.id] || {\n            hours: 0,\n            amount: 0\n          };\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"individual-job-card\",\n            style: {\n              marginBottom: 0\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"job-card-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"job-main-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"job-title\",\n                  children: job.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"job-time\",\n                  children: [stats.hours.toFixed(2), \"h \\u2022 \", dataService.formatCurrency(stats.amount)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 23\n                }, this), job.closed && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"job-status\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"status-overdue\",\n                    children: \"Closed\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 66\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 38\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"job-actions\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  variant: \"primary\",\n                  onClick: () => onInvoiceJob(job.id),\n                  title: \"Invoice job\",\n                  \"aria-label\": `Generate invoice for job ${job.name}`,\n                  children: \"\\uD83D\\uDCB5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  variant: \"secondary\",\n                  onClick: () => closeJob(job),\n                  title: \"Close job\",\n                  \"aria-label\": `Close job ${job.name}`,\n                  children: \"\\u2713\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  variant: \"secondary\",\n                  onClick: () => setExpandedChargesJobId(expandedChargesJobId === job.id ? null : job.id),\n                  \"aria-label\": `Toggle charges for job ${job.name}`,\n                  children: \"\\uD83D\\uDCB2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 19\n            }, this), expandedChargesJobId === job.id && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 p-2 rounded bg-gray-50 border border-gray-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs font-semibold mb-1\",\n                children: \"Charges\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 23\n              }, this), !appData.entries.some(e => e.jobId === job.id) && (appData.clients || []).length > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-1\",\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"border rounded px-1 py-0.5 text-[11px] w-full\",\n                  value: chargeForm.clientId || '',\n                  onChange: e => setChargeForm(f => ({\n                    ...f,\n                    clientId: e.target.value\n                  })),\n                  \"aria-label\": \"Charge client\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"-- Select Client --\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 47\n                  }, this), (appData.clients || []).map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: c.id,\n                    children: c.name\n                  }, c.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 78\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 43\n              }, this), chargesForJob(job.id).length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500 mb-2\",\n                children: \"No charges\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-1 mb-2\",\n                children: chargesForJob(job.id).map(ch => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-[11px] bg-white rounded px-2 py-1 border border-gray-200\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"truncate\",\n                    title: ch.description,\n                    children: [ch.kind === 'part' ? 'üß©' : 'üßæ', \" \", ch.description, \" (\", ch.quantity, \" x \", dataService.formatCurrency(ch.unitPrice), \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-medium\",\n                      children: dataService.formatCurrency(ch.amountCached)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 221,\n                      columnNumber: 33\n                    }, this), !ch.invoiced && /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"text-red-500 text-xs\",\n                      onClick: () => deleteCharge(ch.id),\n                      \"aria-label\": \"Delete charge\",\n                      children: \"\\u2715\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 222,\n                      columnNumber: 50\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 31\n                  }, this)]\n                }, ch.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 29\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-5 gap-1 mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"border rounded px-1 py-0.5 text-[11px] col-span-1\",\n                  value: chargeForm.kind,\n                  onChange: e => setChargeForm(f => ({\n                    ...f,\n                    kind: e.target.value\n                  })),\n                  \"aria-label\": \"Charge kind\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"part\",\n                    children: \"Part\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"expense\",\n                    children: \"Expense\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"border rounded px-1 py-0.5 text-[11px] col-span-2\",\n                  placeholder: \"Description\",\n                  value: chargeForm.description,\n                  onChange: e => setChargeForm(f => ({\n                    ...f,\n                    description: e.target.value\n                  }))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"border rounded px-1 py-0.5 text-[11px]\",\n                  placeholder: \"Qty\",\n                  type: \"number\",\n                  min: \"0.01\",\n                  step: \"0.01\",\n                  value: chargeForm.quantity,\n                  onChange: e => setChargeForm(f => ({\n                    ...f,\n                    quantity: e.target.value\n                  }))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"border rounded px-1 py-0.5 text-[11px]\",\n                  placeholder: \"Cost\",\n                  type: \"number\",\n                  min: \"0\",\n                  step: \"0.01\",\n                  value: chargeForm.unitCost,\n                  onChange: e => setChargeForm(f => ({\n                    ...f,\n                    unitCost: e.target.value\n                  }))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"border rounded px-1 py-0.5 text-[11px] col-span-2\",\n                  placeholder: \"Price\",\n                  type: \"number\",\n                  min: \"0\",\n                  step: \"0.01\",\n                  value: chargeForm.unitPrice,\n                  onChange: e => setChargeForm(f => ({\n                    ...f,\n                    unitPrice: e.target.value\n                  }))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"bg-blue-600 hover:bg-blue-700 text-white rounded px-2 py-0.5 text-[11px] col-span-1\",\n                  type: \"button\",\n                  onClick: () => addCharge(job),\n                  title: \"Add charge\",\n                  children: \"Add\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-[10px] text-gray-400\",\n                children: \"Leave Price empty to use Cost. Amount auto-calculated.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 21\n            }, this)]\n          }, job.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"card-title\",\n          children: [\"Closed Jobs (\", closedJobs.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), closedJobs.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-state\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"empty-state-text\",\n          children: \"No closed jobs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"activity-list\",\n        children: closedJobs.sort((a, b) => b.closedAt - a.closedAt).map(job => {\n          const stats = jobStats[job.id] || {\n            hours: 0,\n            amount: 0\n          };\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"individual-job-card opacity-70\",\n            style: {\n              marginBottom: 0\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"job-card-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"job-main-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"job-title\",\n                  children: job.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"job-time\",\n                  children: [stats.hours.toFixed(2), \"h \\u2022 \", dataService.formatCurrency(stats.amount)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"job-client text-xs text-gray-400\",\n                  children: [\"Closed \", job.closedAt ? new Date(job.closedAt).toLocaleDateString() : '']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"job-actions\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  variant: \"secondary\",\n                  onClick: () => reopenJob(job),\n                  title: \"Re-open job\",\n                  \"aria-label\": `Re-open job ${job.name}`,\n                  children: \"\\u21A9\\uFE0F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  variant: \"primary\",\n                  onClick: () => onInvoiceJob(job.id),\n                  title: \"Invoice again\",\n                  \"aria-label\": `Generate another invoice for job ${job.name}`,\n                  children: \"\\uD83D\\uDCB5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 19\n            }, this)\n          }, job.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, this);\n};\n_s(JobsTab, \"h7WKMGbyCqlUMa+IO08dleNRY0E=\");\n_c = JobsTab;\nexport default JobsTab;\nvar _c;\n$RefreshReg$(_c, \"JobsTab\");","map":{"version":3,"names":["React","useMemo","useEffect","useState","Card","Button","dataService","jsxDEV","_jsxDEV","JobsTab","appData","updateAppData","onNavigate","onInvoiceJob","_s","jobs","charges","expandedChargesJobId","setExpandedChargesJobId","chargeForm","setChargeForm","kind","description","quantity","unitCost","unitPrice","clientId","category","editingChargeId","setEditingChargeId","editDraft","setEditDraft","showBulkAdd","setShowBulkAdd","bulkText","setBulkText","entries","currentJobs","missingJobEntries","filter","e","taskName","jobId","find","j","id","length","additions","updates","forEach","name","trim","job","toLowerCase","generateId","closed","createdAt","Date","now","push","entryId","updatedJobs","updatedEntries","map","upd","u","openJobs","closedJobs","jobStats","hours","amount","end","client","clients","c","durationToHours","start","rate","closeJob","window","confirm","closedAt","reopenJob","chargesForJob","addCharge","_appData$entries$find","_appData$clients$","desc","alert","qty","parseFloat","amountCached","inferredClientId","undefined","newCharge","invoiced","deleteCharge","chargeId","beginEdit","charge","String","cancelEdit","saveEdit","updated","parseBulk","lines","split","l","newOnes","line","_appData$entries$find2","_appData$clients$2","parts","p","qtyStr","costStr","priceStr","kindStr","catStr","finalPrice","isNaN","formatCurrency","v","className","children","fileName","_jsxFileName","lineNumber","columnNumber","sort","a","b","localeCompare","stats","style","marginBottom","toFixed","size","variant","onClick","title","some","value","onChange","f","target","ch","placeholder","type","min","step","toLocaleDateString","_c","$RefreshReg$"],"sources":["C:/Users/jurgl/HTMLProjects/CrickTime/src/components/tabs/JobsTab.js"],"sourcesContent":["import React, { useMemo, useEffect, useState } from 'react';\r\nimport Card from '../ui/Card';\r\nimport Button from '../ui/Button';\r\nimport { dataService } from '../../utils/dataService';\r\n\r\n/**\r\n * Jobs Tab\r\n * Shows open & closed jobs with ability to close and invoice.\r\n */\r\nconst JobsTab = ({ appData, updateAppData, onNavigate, onInvoiceJob }) => {\r\n  const jobs = appData.jobs || [];\r\n  const charges = appData.charges || [];\r\n  const [expandedChargesJobId, setExpandedChargesJobId] = useState(null);\r\n  const [chargeForm, setChargeForm] = useState({ kind:'part', description:'', quantity:'1', unitCost:'', unitPrice:'', clientId:'', category:'' });\r\n  const [editingChargeId, setEditingChargeId] = useState(null);\r\n  const [editDraft, setEditDraft] = useState(null); // { id, description, quantity, unitCost, unitPrice, category }\r\n  const [showBulkAdd, setShowBulkAdd] = useState(false);\r\n  const [bulkText, setBulkText] = useState('');\r\n  useEffect(() => {\r\n    const entries = appData.entries || [];\r\n    const currentJobs = appData.jobs || [];\r\n    const missingJobEntries = entries.filter(e => e.taskName && (!e.jobId || !currentJobs.find(j => j.id === e.jobId)));\r\n    if (!missingJobEntries.length) return;\r\n    const additions = [];\r\n    const updates = [];\r\n    missingJobEntries.forEach(e => {\r\n      const name = e.taskName.trim();\r\n      let job = currentJobs.find(j => j.name.toLowerCase() === name.toLowerCase());\r\n      if (!job) {\r\n        job = { id: dataService.generateId(), name, closed: false, createdAt: Date.now() };\r\n        additions.push(job);\r\n      }\r\n      if (!e.jobId) updates.push({ entryId: e.id, jobId: job.id });\r\n    });\r\n    if (additions.length || updates.length) {\r\n      const updatedJobs = [...currentJobs, ...additions];\r\n      const updatedEntries = entries.map(e => {\r\n        const upd = updates.find(u => u.entryId === e.id);\r\n        return upd ? { ...e, jobId: upd.jobId } : e;\r\n      });\r\n      updateAppData({ jobs: updatedJobs, entries: updatedEntries });\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Legacy auto-derivation removed.\r\n\r\n  const openJobs = jobs.filter(j => !j.closed);\r\n  const closedJobs = jobs.filter(j => j.closed);\r\n\r\n  // Aggregate metrics for jobs\r\n  const jobStats = useMemo(() => {\r\n    const map = {};\r\n    (appData.entries || []).forEach(e => {\r\n      const jobId = e.jobId;\r\n      if (!jobId) return;\r\n      if (!map[jobId]) map[jobId] = { hours: 0, amount: 0 };\r\n      if (e.end) {\r\n        const client = appData.clients.find(c => c.id === e.clientId);\r\n        const hours = dataService.durationToHours(e.end - e.start);\r\n        map[jobId].hours += hours;\r\n        map[jobId].amount += client ? hours * client.rate : 0;\r\n      }\r\n    });\r\n    return map;\r\n  }, [appData.entries, appData.clients]);\r\n\r\n  const closeJob = (job) => {\r\n    if (!window.confirm(`Close job \"${job.name}\"? It will be hidden from selection.`)) return;\r\n    updateAppData({ jobs: jobs.map(j => j.id === job.id ? { ...j, closed: true, closedAt: Date.now() } : j) });\r\n  };\r\n\r\n  const reopenJob = (job) => {\r\n    updateAppData({ jobs: jobs.map(j => j.id === job.id ? { ...j, closed: false, closedAt: null } : j) });\r\n  };\r\n\r\n  // ---- Charges Helpers (Phase 1 Parts & Expenses) ----\r\n  const chargesForJob = (jobId) => charges.filter(c => c.jobId === jobId);\r\n\r\n  const addCharge = (job) => {\r\n    const desc = chargeForm.description.trim();\r\n    if (!desc) { alert('Description required'); return; }\r\n    const qty = parseFloat(chargeForm.quantity)||0; if (qty<=0){ alert('Quantity must be > 0'); return; }\r\n    const unitCost = parseFloat(chargeForm.unitCost)||0; if (unitCost<0){ alert('Unit cost >= 0'); return; }\r\n    const unitPrice = chargeForm.unitPrice ? parseFloat(chargeForm.unitPrice) : unitCost;\r\n    if (unitPrice < 0) { alert('Unit price >= 0'); return; }\r\n    const amountCached = qty * unitPrice;\r\n    // Determine client: prefer explicit selection on form if present\r\n    const inferredClientId = (appData.entries.find(e=>e.jobId===job.id)?.clientId) || chargeForm.clientId || (appData.clients[0]?.id)||'';\r\n    if (!inferredClientId) { alert('Select a client for this charge.'); return; }\r\n  category: chargeForm.kind === 'expense' ? (chargeForm.category || 'other') : undefined\r\n    const newCharge = {\r\n      id: dataService.generateId(),\r\n      jobId: job.id,\r\n      clientId: inferredClientId,\r\n      kind: chargeForm.kind,\r\n      description: desc,\r\n      quantity: qty,\r\n      unitCost,\r\n      unitPrice,\r\n      amountCached,\r\n      createdAt: Date.now(),\r\n      invoiced: false\r\n    };\r\n    updateAppData({ charges: [...charges, newCharge] });\r\n    setChargeForm({ kind:'part', description:'', quantity:'1', unitCost:'', unitPrice:'', clientId: chargeForm.clientId||'' });\r\n  };\r\n\r\n  const deleteCharge = (chargeId) => {\r\n    if (!window.confirm('Delete this charge?')) return;\r\n    updateAppData({ charges: charges.filter(c => c.id !== chargeId) });\r\n  };\r\n  const beginEdit = (charge) => {\r\n    if (charge.invoiced) return;\r\n    setEditingChargeId(charge.id);\r\n    setEditDraft({ ...charge, quantity: String(charge.quantity), unitCost: String(charge.unitCost), unitPrice: String(charge.unitPrice), description: charge.description, category: charge.category || '' });\r\n  };\r\n\r\n  const cancelEdit = () => {\r\n    setEditingChargeId(null);\r\n    setEditDraft(null);\r\n  };\r\n\r\n  const saveEdit = () => {\r\n    if (!editDraft) return;\r\n    const desc = editDraft.description.trim(); if (!desc) { alert('Description required'); return; }\r\n    const qty = parseFloat(editDraft.quantity)||0; if (qty<=0){ alert('Qty > 0'); return; }\r\n    const unitCost = parseFloat(editDraft.unitCost)||0; if (unitCost<0){ alert('Cost >=0'); return; }\r\n    const unitPrice = parseFloat(editDraft.unitPrice)||0; if (unitPrice<0){ alert('Price >=0'); return; }\r\n    const amountCached = qty * unitPrice;\r\n    const updated = charges.map(c => c.id === editDraft.id ? { ...c, description: desc, quantity: qty, unitCost, unitPrice, amountCached, category: c.kind==='expense' ? (editDraft.category||'other') : undefined } : c);\r\n    updateAppData({ charges: updated });\r\n    cancelEdit();\r\n  };\r\n\r\n  const parseBulk = (job) => {\r\n    const lines = bulkText.split(/\\r?\\n/).map(l=>l.trim()).filter(l=>l);\r\n    if (!lines.length) { alert('No lines to import'); return; }\r\n    const newOnes = [];\r\n    for (const line of lines) {\r\n      // description,qty,cost,price,kind(optional),category(optional)\r\n      const parts = line.split(',').map(p=>p.trim());\r\n      if (parts.length < 4) { continue; }\r\n      let [description, qtyStr, costStr, priceStr, kindStr, catStr] = parts;\r\n      const qty = parseFloat(qtyStr)||0; if (qty<=0) continue;\r\n      const unitCost = parseFloat(costStr)||0; if (unitCost<0) continue;\r\n      const unitPrice = parseFloat(priceStr); const finalPrice = isNaN(unitPrice)?unitCost:unitPrice;\r\n      const kind = (kindStr==='expense' || kindStr==='part') ? kindStr : 'part';\r\n      const category = kind==='expense' ? (catStr || 'other') : undefined;\r\n      const amountCached = qty * finalPrice;\r\n      const inferredClientId = (appData.entries.find(e=>e.jobId===job.id)?.clientId) || chargeForm.clientId || (appData.clients[0]?.id)||'';\r\n      newOnes.push({ id: dataService.generateId(), jobId: job.id, clientId: inferredClientId, kind, description, quantity: qty, unitCost, unitPrice: finalPrice, amountCached, createdAt: Date.now(), invoiced: false, category });\r\n    }\r\n    if (!newOnes.length) { alert('No valid lines parsed'); return; }\r\n    updateAppData({ charges: [...charges, ...newOnes] });\r\n    setBulkText('');\r\n    setShowBulkAdd(false);\r\n  };\r\n\r\n  const formatCurrency = (v) => dataService.formatCurrency(v);\r\n\r\n\r\n  return (\r\n    <div className=\"tab-content\">\r\n      <Card>\r\n        <h2 className=\"page-title\">Jobs</h2>\r\n        <p className=\"text-xs text-gray-400\">Manage open jobs and invoice work per job.</p>\r\n      </Card>\r\n\r\n      <Card>\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title\">Open Jobs ({openJobs.length})</h3>\r\n        </div>\r\n        {openJobs.length === 0 ? (\r\n          <div className=\"empty-state\"><p className=\"empty-state-text\">No open jobs</p></div>\r\n        ) : (\r\n          <div className=\"activity-list\">\r\n            {openJobs.sort((a,b)=>a.name.localeCompare(b.name)).map(job => {\r\n              const stats = jobStats[job.id] || { hours:0, amount:0 };\r\n              return (\r\n                <div key={job.id} className=\"individual-job-card\" style={{marginBottom:0}}>\r\n                  <div className=\"job-card-content\">\r\n                    <div className=\"job-main-info\">\r\n                      <div className=\"job-title\">{job.name}</div>\r\n                      <div className=\"job-time\">{stats.hours.toFixed(2)}h ‚Ä¢ {dataService.formatCurrency(stats.amount)}</div>\r\n                      {job.closed && <div className=\"job-status\"><span className=\"status-overdue\">Closed</span></div>}\r\n                    </div>\r\n                    <div className=\"job-actions\">\r\n                      <Button size=\"small\" variant=\"primary\" onClick={() => onInvoiceJob(job.id)} title=\"Invoice job\" aria-label={`Generate invoice for job ${job.name}`}>üíµ</Button>\r\n                      <Button size=\"small\" variant=\"secondary\" onClick={() => closeJob(job)} title=\"Close job\" aria-label={`Close job ${job.name}`}>‚úì</Button>\r\n                      <Button size=\"small\" variant=\"secondary\" onClick={() => setExpandedChargesJobId(expandedChargesJobId===job.id?null:job.id)} aria-label={`Toggle charges for job ${job.name}`}>üí≤</Button>\r\n                    </div>\r\n                  </div>\r\n                  {expandedChargesJobId === job.id && (\r\n                    <div className=\"mt-2 p-2 rounded bg-gray-50 border border-gray-200\">\r\n                      <div className=\"text-xs font-semibold mb-1\">Charges</div>\r\n                                        {/* Client selector if multiple clients or no inferred client */}\r\n                                        {(!appData.entries.some(e=>e.jobId===job.id) && (appData.clients||[]).length > 1) && (\r\n                                          <div className=\"mb-1\">\r\n                                            <select\r\n                                              className=\"border rounded px-1 py-0.5 text-[11px] w-full\"\r\n                                              value={chargeForm.clientId || ''}\r\n                                              onChange={e=>setChargeForm(f=>({...f, clientId: e.target.value}))}\r\n                                              aria-label=\"Charge client\"\r\n                                            >\r\n                                              <option value=\"\">-- Select Client --</option>\r\n                                              {(appData.clients||[]).map(c=> <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                                            </select>\r\n                                          </div>\r\n                                        )}\r\n                      {chargesForJob(job.id).length === 0 ? (\r\n                        <div className=\"text-xs text-gray-500 mb-2\">No charges</div>\r\n                      ) : (\r\n                        <div className=\"space-y-1 mb-2\">\r\n                          {chargesForJob(job.id).map(ch => (\r\n                            <div key={ch.id} className=\"flex justify-between text-[11px] bg-white rounded px-2 py-1 border border-gray-200\">\r\n                              <div className=\"truncate\" title={ch.description}>\r\n                                {ch.kind === 'part' ? 'üß©' : 'üßæ'} {ch.description} ({ch.quantity} x {dataService.formatCurrency(ch.unitPrice)})\r\n                              </div>\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <span className=\"font-medium\">{dataService.formatCurrency(ch.amountCached)}</span>\r\n                                {!ch.invoiced && <button className=\"text-red-500 text-xs\" onClick={()=>deleteCharge(ch.id)} aria-label=\"Delete charge\">‚úï</button>}\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                      <div className=\"grid grid-cols-5 gap-1 mb-2\">\r\n                        <select className=\"border rounded px-1 py-0.5 text-[11px] col-span-1\" value={chargeForm.kind} onChange={e=>setChargeForm(f=>({...f, kind:e.target.value}))} aria-label=\"Charge kind\">\r\n                          <option value=\"part\">Part</option>\r\n                          <option value=\"expense\">Expense</option>\r\n                        </select>\r\n                        <input className=\"border rounded px-1 py-0.5 text-[11px] col-span-2\" placeholder=\"Description\" value={chargeForm.description} onChange={e=>setChargeForm(f=>({...f, description:e.target.value}))} />\r\n                        <input className=\"border rounded px-1 py-0.5 text-[11px]\" placeholder=\"Qty\" type=\"number\" min=\"0.01\" step=\"0.01\" value={chargeForm.quantity} onChange={e=>setChargeForm(f=>({...f, quantity:e.target.value}))} />\r\n                        <input className=\"border rounded px-1 py-0.5 text-[11px]\" placeholder=\"Cost\" type=\"number\" min=\"0\" step=\"0.01\" value={chargeForm.unitCost} onChange={e=>setChargeForm(f=>({...f, unitCost:e.target.value}))} />\r\n                        <input className=\"border rounded px-1 py-0.5 text-[11px] col-span-2\" placeholder=\"Price\" type=\"number\" min=\"0\" step=\"0.01\" value={chargeForm.unitPrice} onChange={e=>setChargeForm(f=>({...f, unitPrice:e.target.value}))} />\r\n                        <button className=\"bg-blue-600 hover:bg-blue-700 text-white rounded px-2 py-0.5 text-[11px] col-span-1\" type=\"button\" onClick={()=>addCharge(job)} title=\"Add charge\">Add</button>\r\n                      </div>\r\n                      <div className=\"text-[10px] text-gray-400\">Leave Price empty to use Cost. Amount auto-calculated.</div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </Card>\r\n\r\n      <Card>\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title\">Closed Jobs ({closedJobs.length})</h3>\r\n        </div>\r\n        {closedJobs.length === 0 ? (\r\n          <div className=\"empty-state\"><p className=\"empty-state-text\">No closed jobs</p></div>\r\n        ) : (\r\n          <div className=\"activity-list\">\r\n            {closedJobs.sort((a,b)=>b.closedAt - a.closedAt).map(job => {\r\n              const stats = jobStats[job.id] || { hours:0, amount:0 };\r\n              return (\r\n                <div key={job.id} className=\"individual-job-card opacity-70\" style={{marginBottom:0}}>\r\n                  <div className=\"job-card-content\">\r\n                    <div className=\"job-main-info\">\r\n                      <div className=\"job-title\">{job.name}</div>\r\n                      <div className=\"job-time\">{stats.hours.toFixed(2)}h ‚Ä¢ {dataService.formatCurrency(stats.amount)}</div>\r\n                      <div className=\"job-client text-xs text-gray-400\">Closed {job.closedAt ? new Date(job.closedAt).toLocaleDateString() : ''}</div>\r\n                    </div>\r\n                    <div className=\"job-actions\">\r\n                      <Button size=\"small\" variant=\"secondary\" onClick={() => reopenJob(job)} title=\"Re-open job\" aria-label={`Re-open job ${job.name}`}>‚Ü©Ô∏è</Button>\r\n                      <Button size=\"small\" variant=\"primary\" onClick={() => onInvoiceJob(job.id)} title=\"Invoice again\" aria-label={`Generate another invoice for job ${job.name}`}>üíµ</Button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default JobsTab;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}