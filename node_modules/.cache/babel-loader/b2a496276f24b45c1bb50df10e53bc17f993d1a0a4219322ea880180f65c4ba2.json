{"ast":null,"code":"/**\r\n * Data Service for Mechanic Hours App\r\n * Handles all data persistence and manipulation\r\n * Reference: www.context7.com for data management best practices\r\n */\n\nconst STORAGE_KEY = 'mechanicHoursData';\n\n// Schema version\nexport const CURRENT_SCHEMA_VERSION = 3;\n\n// Default data structure (legacy 'tasks' removed) + new persisted invoices collection\nconst DEFAULT_DATA = {\n  schemaVersion: CURRENT_SCHEMA_VERSION,\n  clients: [],\n  entries: [],\n  scheduledJobs: [],\n  jobs: [],\n  invoices: [],\n  // finalized invoice snapshots\n  charges: [],\n  // parts & expense charges phase 1\n  active: null\n};\n\n// Migration functions keyed by fromVersion -> toVersion transformation\n// Each migration receives a mutable data object and should return it\nconst migrations = [\n// to v2\nfunction toV2(data) {\n  if (!data.invoices) data.invoices = [];\n  data.schemaVersion = 2;\n  return data;\n},\n// to v3 - add charges collection\nfunction toV3(data) {\n  if (!Array.isArray(data.charges)) data.charges = [];\n  data.schemaVersion = 3;\n  return data;\n}];\nfunction applyMigrations(raw) {\n  let data = raw || {};\n  let version = typeof data.schemaVersion === 'number' ? data.schemaVersion : 1; // treat absence as v1\n  if (version < CURRENT_SCHEMA_VERSION) {\n    if (version < 2) data = migrations[0](data);\n    if (version < 3) data = migrations[1](data);\n  }\n  return data;\n}\nexport const dataService = {\n  /**\r\n   * Load data from localStorage\r\n   * @returns {Object} Application data\r\n   */\n  loadData() {\n    try {\n      const data = localStorage.getItem(STORAGE_KEY);\n      const parsed = data ? JSON.parse(data) : DEFAULT_DATA;\n      // Legacy cleanup: remove deprecated 'tasks' array if present\n      if (parsed && parsed.tasks) {\n        delete parsed.tasks;\n      }\n      // Ensure expected arrays exist\n      if (!Array.isArray(parsed.jobs)) parsed.jobs = [];\n      if (!Array.isArray(parsed.scheduledJobs)) parsed.scheduledJobs = [];\n      // Apply migrations\n      const migrated = applyMigrations(parsed);\n      // Ensure invoices array present after migration\n      if (!Array.isArray(migrated.invoices)) migrated.invoices = [];\n      if (!Array.isArray(migrated.charges)) migrated.charges = [];\n      return migrated;\n    } catch (error) {\n      console.error('Error loading data:', error);\n      return DEFAULT_DATA;\n    }\n  },\n  /**\r\n   * Save data to localStorage\r\n   * @param {Object} data - Application data to save\r\n   */\n  saveData(data) {\n    try {\n      const clone = {\n        ...data\n      };\n      if (clone.tasks) delete clone.tasks; // enforce removal\n      if (!clone.schemaVersion) clone.schemaVersion = CURRENT_SCHEMA_VERSION;\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(clone));\n    } catch (error) {\n      console.error('Error saving data:', error);\n    }\n  },\n  /**\r\n   * Generate unique ID\r\n   * @returns {string} Unique identifier\r\n   */\n  generateId() {\n    return Date.now().toString(36) + Math.random().toString(36).substr(2);\n  },\n  /**\r\n   * Format duration from milliseconds to readable string\r\n   * @param {number} duration - Duration in milliseconds\r\n   * @returns {string} Formatted duration (e.g., \"2h 30m\")\r\n   */\n  formatDuration(duration) {\n    if (duration == null || isNaN(duration) || duration < 0) return '0m';\n    // Show seconds for very short durations (< 60s)\n    if (duration < 1000) return '<1s';\n    if (duration < 60 * 1000) {\n      const secs = Math.floor(duration / 1000);\n      return secs < 5 ? '<5s' : `${secs}s`;\n    }\n    const hours = Math.floor(duration / (1000 * 60 * 60));\n    const minutes = Math.floor(duration % (1000 * 60 * 60) / (1000 * 60));\n    if (hours === 0) {\n      return minutes === 0 ? '<1m' : `${minutes}m`;\n    } else if (minutes === 0) {\n      return `${hours}h`;\n    } else {\n      return `${hours}h ${minutes}m`;\n    }\n  },\n  /**\r\n   * Convert duration to decimal hours for billing\r\n   * @param {number} duration - Duration in milliseconds\r\n   * @returns {number} Duration in decimal hours\r\n   */\n  durationToHours(duration) {\n    return duration / (1000 * 60 * 60);\n  },\n  /**\r\n   * Format currency amount\r\n   * @param {number} amount - Amount to format\r\n   * @returns {string} Formatted currency string\r\n   */\n  formatCurrency(amount) {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD'\n    }).format(amount);\n  },\n  /**\r\n   * Format date for display\r\n   * @param {number|Date} date - Date to format\r\n   * @returns {string} Formatted date string\r\n   */\n  formatDate(date) {\n    const dateObj = typeof date === 'number' ? new Date(date) : date;\n    return dateObj.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  },\n  /**\r\n   * Format time for display\r\n   * @param {number|Date} date - Date to format\r\n   * @returns {string} Formatted time string\r\n   */\n  formatTime(date) {\n    const dateObj = typeof date === 'number' ? new Date(date) : date;\n    return dateObj.toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  },\n  /**\r\n   * Parse a YYYY-MM-DD date string as a local Date (no UTC shift)\r\n   * @param {string} dateStr - Date string in format YYYY-MM-DD\r\n   * @returns {Date|null} Local date or null\r\n   */\n  parseLocalDate(dateStr) {\n    if (!dateStr || typeof dateStr !== 'string') return null;\n    const [y, m, d] = dateStr.split('-').map(Number);\n    if (!y || !m || !d) return null;\n    return new Date(y, m - 1, d, 0, 0, 0, 0);\n  },\n  /**\r\n   * Get entries for a specific date range\r\n   * @param {Object[]} entries - All entries\r\n   * @param {Date} startDate - Start date\r\n   * @param {Date} endDate - End date\r\n   * @returns {Object[]} Filtered entries\r\n   */\n  getEntriesInRange(entries, startDate, endDate) {\n    return entries.filter(entry => {\n      const entryDate = new Date(entry.start);\n      return entryDate >= startDate && entryDate <= endDate;\n    });\n  },\n  /**\r\n   * Calculate total hours for entries\r\n   * @param {Object[]} entries - Entries to calculate\r\n   * @returns {number} Total hours\r\n   */\n  calculateTotalHours(entries) {\n    return entries.reduce((total, entry) => {\n      if (entry.end && entry.start) {\n        return total + this.durationToHours(entry.end - entry.start);\n      }\n      return total;\n    }, 0);\n  },\n  /**\r\n   * Calculate total amount for entries with client rates\r\n   * @param {Object[]} entries - Entries to calculate\r\n   * @param {Object[]} clients - Client data with rates\r\n   * @returns {number} Total amount\r\n   */\n  calculateTotalAmount(entries, clients) {\n    return entries.reduce((total, entry) => {\n      if (entry.end && entry.start) {\n        const client = clients.find(c => c.id === entry.clientId);\n        if (client && client.rate) {\n          const hours = this.durationToHours(entry.end - entry.start);\n          return total + hours * client.rate;\n        }\n      }\n      return total;\n    }, 0);\n  },\n  /**\r\n   * Export data as JSON for backup\r\n   * @param {Object} data - Application data\r\n   * @returns {string} JSON string\r\n   */\n  exportData(data) {\n    try {\n      return JSON.stringify(data, null, 2);\n    } catch (error) {\n      console.error('Error exporting data:', error);\n      return null;\n    }\n  },\n  /**\r\n   * Import data from JSON backup\r\n   * @param {string} jsonString - JSON data string\r\n   * @returns {Object|null} Parsed data or null if invalid\r\n   */\n  importData(jsonString) {\n    try {\n      const data = JSON.parse(jsonString);\n      // Validate data structure\n      if (data && typeof data === 'object' && Array.isArray(data.clients) && Array.isArray(data.entries)) {\n        // Provide graceful upgrade removing legacy 'tasks'\n        if (data.tasks) delete data.tasks; // legacy cleanup\n        if (!Array.isArray(data.jobs)) data.jobs = [];\n        if (!Array.isArray(data.scheduledJobs)) data.scheduledJobs = [];\n        return data;\n      }\n      return null;\n    } catch (error) {\n      console.error('Error importing data:', error);\n      return null;\n    }\n  }\n};","map":{"version":3,"names":["STORAGE_KEY","CURRENT_SCHEMA_VERSION","DEFAULT_DATA","schemaVersion","clients","entries","scheduledJobs","jobs","invoices","charges","active","migrations","toV2","data","toV3","Array","isArray","applyMigrations","raw","version","dataService","loadData","localStorage","getItem","parsed","JSON","parse","tasks","migrated","error","console","saveData","clone","setItem","stringify","generateId","Date","now","toString","Math","random","substr","formatDuration","duration","isNaN","secs","floor","hours","minutes","durationToHours","formatCurrency","amount","Intl","NumberFormat","style","currency","format","formatDate","date","dateObj","toLocaleDateString","year","month","day","formatTime","toLocaleTimeString","hour","minute","parseLocalDate","dateStr","y","m","d","split","map","Number","getEntriesInRange","startDate","endDate","filter","entry","entryDate","start","calculateTotalHours","reduce","total","end","calculateTotalAmount","client","find","c","id","clientId","rate","exportData","importData","jsonString"],"sources":["C:/Users/jurgl/HTMLProjects/CrickTime/src/utils/dataService.js"],"sourcesContent":["/**\r\n * Data Service for Mechanic Hours App\r\n * Handles all data persistence and manipulation\r\n * Reference: www.context7.com for data management best practices\r\n */\r\n\r\nconst STORAGE_KEY = 'mechanicHoursData';\r\n\r\n// Schema version\r\nexport const CURRENT_SCHEMA_VERSION = 3;\r\n\r\n// Default data structure (legacy 'tasks' removed) + new persisted invoices collection\r\nconst DEFAULT_DATA = {\r\n  schemaVersion: CURRENT_SCHEMA_VERSION,\r\n  clients: [],\r\n  entries: [],\r\n  scheduledJobs: [],\r\n  jobs: [],\r\n  invoices: [], // finalized invoice snapshots\r\n  charges: [], // parts & expense charges phase 1\r\n  active: null\r\n};\r\n\r\n// Migration functions keyed by fromVersion -> toVersion transformation\r\n// Each migration receives a mutable data object and should return it\r\nconst migrations = [\r\n  // to v2\r\n  function toV2(data) {\r\n    if (!data.invoices) data.invoices = [];\r\n    data.schemaVersion = 2;\r\n    return data;\r\n  },\r\n  // to v3 - add charges collection\r\n  function toV3(data) {\r\n    if (!Array.isArray(data.charges)) data.charges = [];\r\n    data.schemaVersion = 3;\r\n    return data;\r\n  }\r\n];\r\n\r\nfunction applyMigrations(raw) {\r\n  let data = raw || {};\r\n  let version = typeof data.schemaVersion === 'number' ? data.schemaVersion : 1; // treat absence as v1\r\n  if (version < CURRENT_SCHEMA_VERSION) {\r\n    if (version < 2) data = migrations[0](data);\r\n    if (version < 3) data = migrations[1](data);\r\n  }\r\n  return data;\r\n}\r\n\r\nexport const dataService = {\r\n  /**\r\n   * Load data from localStorage\r\n   * @returns {Object} Application data\r\n   */\r\n  loadData() {\r\n    try {\r\n      const data = localStorage.getItem(STORAGE_KEY);\r\n  const parsed = data ? JSON.parse(data) : DEFAULT_DATA;\r\n      // Legacy cleanup: remove deprecated 'tasks' array if present\r\n      if (parsed && parsed.tasks) {\r\n        delete parsed.tasks;\r\n      }\r\n      // Ensure expected arrays exist\r\n      if (!Array.isArray(parsed.jobs)) parsed.jobs = [];\r\n      if (!Array.isArray(parsed.scheduledJobs)) parsed.scheduledJobs = [];\r\n  // Apply migrations\r\n  const migrated = applyMigrations(parsed);\r\n  // Ensure invoices array present after migration\r\n  if (!Array.isArray(migrated.invoices)) migrated.invoices = [];\r\n  if (!Array.isArray(migrated.charges)) migrated.charges = [];\r\n  return migrated;\r\n    } catch (error) {\r\n      console.error('Error loading data:', error);\r\n      return DEFAULT_DATA;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Save data to localStorage\r\n   * @param {Object} data - Application data to save\r\n   */\r\n  saveData(data) {\r\n    try {\r\n  const clone = { ...data };\r\n  if (clone.tasks) delete clone.tasks; // enforce removal\r\n  if (!clone.schemaVersion) clone.schemaVersion = CURRENT_SCHEMA_VERSION;\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(clone));\r\n    } catch (error) {\r\n      console.error('Error saving data:', error);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Generate unique ID\r\n   * @returns {string} Unique identifier\r\n   */\r\n  generateId() {\r\n    return Date.now().toString(36) + Math.random().toString(36).substr(2);\r\n  },\r\n\r\n  /**\r\n   * Format duration from milliseconds to readable string\r\n   * @param {number} duration - Duration in milliseconds\r\n   * @returns {string} Formatted duration (e.g., \"2h 30m\")\r\n   */\r\n  formatDuration(duration) {\r\n    if (duration == null || isNaN(duration) || duration < 0) return '0m';\r\n    // Show seconds for very short durations (< 60s)\r\n    if (duration < 1000) return '<1s';\r\n    if (duration < 60 * 1000) {\r\n      const secs = Math.floor(duration / 1000);\r\n      return secs < 5 ? '<5s' : `${secs}s`;\r\n    }\r\n    const hours = Math.floor(duration / (1000 * 60 * 60));\r\n    const minutes = Math.floor((duration % (1000 * 60 * 60)) / (1000 * 60));\r\n    if (hours === 0) {\r\n      return minutes === 0 ? '<1m' : `${minutes}m`;\r\n    } else if (minutes === 0) {\r\n      return `${hours}h`;\r\n    } else {\r\n      return `${hours}h ${minutes}m`;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Convert duration to decimal hours for billing\r\n   * @param {number} duration - Duration in milliseconds\r\n   * @returns {number} Duration in decimal hours\r\n   */\r\n  durationToHours(duration) {\r\n    return duration / (1000 * 60 * 60);\r\n  },\r\n\r\n  /**\r\n   * Format currency amount\r\n   * @param {number} amount - Amount to format\r\n   * @returns {string} Formatted currency string\r\n   */\r\n  formatCurrency(amount) {\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: 'USD'\r\n    }).format(amount);\r\n  },\r\n\r\n  /**\r\n   * Format date for display\r\n   * @param {number|Date} date - Date to format\r\n   * @returns {string} Formatted date string\r\n   */\r\n  formatDate(date) {\r\n    const dateObj = typeof date === 'number' ? new Date(date) : date;\r\n    return dateObj.toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric'\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Format time for display\r\n   * @param {number|Date} date - Date to format\r\n   * @returns {string} Formatted time string\r\n   */\r\n  formatTime(date) {\r\n    const dateObj = typeof date === 'number' ? new Date(date) : date;\r\n    return dateObj.toLocaleTimeString('en-US', {\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Parse a YYYY-MM-DD date string as a local Date (no UTC shift)\r\n   * @param {string} dateStr - Date string in format YYYY-MM-DD\r\n   * @returns {Date|null} Local date or null\r\n   */\r\n  parseLocalDate(dateStr) {\r\n    if (!dateStr || typeof dateStr !== 'string') return null;\r\n    const [y,m,d] = dateStr.split('-').map(Number);\r\n    if (!y || !m || !d) return null;\r\n    return new Date(y, m-1, d, 0,0,0,0);\r\n  },\r\n\r\n  /**\r\n   * Get entries for a specific date range\r\n   * @param {Object[]} entries - All entries\r\n   * @param {Date} startDate - Start date\r\n   * @param {Date} endDate - End date\r\n   * @returns {Object[]} Filtered entries\r\n   */\r\n  getEntriesInRange(entries, startDate, endDate) {\r\n    return entries.filter(entry => {\r\n      const entryDate = new Date(entry.start);\r\n      return entryDate >= startDate && entryDate <= endDate;\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Calculate total hours for entries\r\n   * @param {Object[]} entries - Entries to calculate\r\n   * @returns {number} Total hours\r\n   */\r\n  calculateTotalHours(entries) {\r\n    return entries.reduce((total, entry) => {\r\n      if (entry.end && entry.start) {\r\n        return total + this.durationToHours(entry.end - entry.start);\r\n      }\r\n      return total;\r\n    }, 0);\r\n  },\r\n\r\n  /**\r\n   * Calculate total amount for entries with client rates\r\n   * @param {Object[]} entries - Entries to calculate\r\n   * @param {Object[]} clients - Client data with rates\r\n   * @returns {number} Total amount\r\n   */\r\n  calculateTotalAmount(entries, clients) {\r\n    return entries.reduce((total, entry) => {\r\n      if (entry.end && entry.start) {\r\n        const client = clients.find(c => c.id === entry.clientId);\r\n        if (client && client.rate) {\r\n          const hours = this.durationToHours(entry.end - entry.start);\r\n          return total + (hours * client.rate);\r\n        }\r\n      }\r\n      return total;\r\n    }, 0);\r\n  },\r\n\r\n  /**\r\n   * Export data as JSON for backup\r\n   * @param {Object} data - Application data\r\n   * @returns {string} JSON string\r\n   */\r\n  exportData(data) {\r\n    try {\r\n      return JSON.stringify(data, null, 2);\r\n    } catch (error) {\r\n      console.error('Error exporting data:', error);\r\n      return null;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Import data from JSON backup\r\n   * @param {string} jsonString - JSON data string\r\n   * @returns {Object|null} Parsed data or null if invalid\r\n   */\r\n  importData(jsonString) {\r\n    try {\r\n      const data = JSON.parse(jsonString);\r\n      // Validate data structure\r\n      if (data && typeof data === 'object' && \r\n          Array.isArray(data.clients) && \r\n          Array.isArray(data.entries)) {\r\n        // Provide graceful upgrade removing legacy 'tasks'\r\n        if (data.tasks) delete data.tasks; // legacy cleanup\r\n        if (!Array.isArray(data.jobs)) data.jobs = [];\r\n        if (!Array.isArray(data.scheduledJobs)) data.scheduledJobs = [];\r\n        return data;\r\n      }\r\n      return null;\r\n    } catch (error) {\r\n      console.error('Error importing data:', error);\r\n      return null;\r\n    }\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}